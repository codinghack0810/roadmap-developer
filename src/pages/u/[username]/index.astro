---
import { UserPublicAccountPage } from '../../../components/UserPublicAccount/UserPublicAccountPage';
import { userApi } from '../../../api/user';
import AccountLayout from '../../../layouts/AccountLayout.astro';

const { username } = Astro.params;
if (!username) {
  return Astro.redirect('/404');
}

const userClient = userApi(Astro as any);
const { response: userDetails, error } =
  await userClient.getUserByUsername(username);

if (error || !userDetails) {
  return Astro.redirect('/404');
}
---

<AccountLayout title={userDetails?.name}>
  <UserPublicAccountPage {...userDetails} client:load />
</AccountLayout>
